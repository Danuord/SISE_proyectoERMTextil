<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../../css/modules/ventas.css">
</head>
<body>
<div class="app">
  <div id="sidebar-container"></div>
 
  <main class="main">
    <div class="topbar">
      <div class="titulo" style="color: #7d5af0;">
        <h1>Ventas</h1>
        <div class="muted" style="color: #a19c9c;">Gestión de ventas</div>
      </div>
 
      <div class="controls">
        <button id="btnOpen" class="btn-primary">+ Vender</button>
        <button id="btnBack" class="back" title="Volver al dashboard">← Volver</button>
      </div>
    </div>
 
    <section class="card">
      <h3>Listado de ventas</h3>
 
      <div style="margin-top:20px;overflow:auto">
        <table id="salesTable">
          <thead>
            <tr>
              <th># Fact.</th>
              <th>Fecha</th>
              <th>Cliente</th>
              <th>Celular</th>
              <th>Cantidad</th>
              <th>Monto</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tabla-body"></tbody>
        </table>
      </div>
 
      <div style="margin-top:10px;" class="palette" aria-hidden>
        <div class="export-buttons">
            <button class="btn-export excel"><i class="fa-solid fa-file-excel"></i> Exportar Excel</button>
        </div>
      </div>
    </section>
  </main>
</div>
 
<!-- MODAL REGISTRO -->
<div id="modalBack" class="modal-back">
  <div class="modal" role="dialog" aria-modal="true">
      <h3 id="modalTitle">Registrar venta</h3>
 
      <div>
        <div>
          <div class="form-row">
            <label>Categoria:</label>
            <select id="selectCategorias"></select>

            <label>Producto:</label>
            <select id="categorySel"></select>
          </div>

          <div class="form-row">
            <label>Cantidad:</label>
            <input id="quantity" type="number" min="1" value="1" />
          </div>
 
          <div class="form-row">
            <label>Monto base:</label>
            <div class="monto" id="montounit"></div>
            <label>Monto total:</label>
            <div class="monto" id="montototal"></div>   
          </div>
        </div>
 
        <div class="actions-row">
          <button id="btnAddItem" class="btn-primary">Agregar</button>
          <button id="btnClear" class="btn-secondary">Nuevo</button>
          <button id="btnSaveSale" class="btn-primary">Guardar</button>
          <button id="btnCloseModal" class="btn-secondary">Cerrar</button>
        </div>
 
        <div class="items-wrap">
          <table>
            <thead>
              <tr>
                <th>Código</th>
                <th>Producto</th>
                <th>Fecha</th>
                <th>Cantidad</th>
                <th>Precio x Uni</th>
                <th>Precio Total</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="itemsBody"></tbody>
          </table>
        </div>
      </div>
  </div>
</div>
 
<!-- MODAL VER -->
<div id="viewBack" class="modal-back">
  <div class="modal">
    <h3>Detalle de venta</h3>
    <div id="viewContent"></div>
 
    <div style="text-align:right;margin-top:12px; display:flex; justify-content: flex-end; gap:10px;">
      <button id="printView" class="icon-btn" style="background:#5B3CC4;color:#fff;padding:8px 14px;border-radius:8px;display:flex;align-items:center;gap:8px;">
        <i class="fa-solid fa-print"></i> Imprimir
      </button>
 
      <button id="closeView" class="icon-btn" style="background:#e5e7eb;padding:8px 14px;border-radius:8px;">
        Cerrar
      </button>
    </div>
 
  </div>
</div>

<!-- Sidebar Component -->
    <script type="module" src="../../components/sidebar.js"></script>
 
<!-- AQUI CARGA EL JS SEPARADO -->
<script type="module" src="../../js/ventas.js"></script>
 
</body>
</html>